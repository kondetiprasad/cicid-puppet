---
classes:
  - nginx
nginx::nginx_upstreams:
  'jenkins-dev-az-a.demo.training.com':
    ensure: present
    members:
      - jenkins-dev-az-a.demo.training.com:8080
  'sonar-dev-az-a.demo.training.com':
    ensure: present
    members:
      - jenkins-dev-az-a.demo.training.com:9000
  'nexus-dev-az-a.demo.training.com':
    ensure: present
    members:
      - jenkins-dev-az.a.demo.training.com:8081
  'app-dev-az-a.demo.training.com':
    ensure: present
    members:
      - app-dev-az-a.demo.training.com:8080

nginx::nginx_vhosts:
  'demo.training.com':
    proxy: 'http://app-dev-az-a.demo.training.com/Spring3HibernateApp'
    server_name:
      - "demo.training.com"
      - "test.demo.training.com"
  'jenkins.demo.training.com':
    proxy: 'http://jenkins-dev-az-a.demo.training.com'
  'sonar.demo.training.com':
    proxy: 'http://sonar-dev-az-a.demo.training.com'
  'nexus.demo.training.com':
    proxy: 'http://nexus-dev-az-a.demo.training.com'

nginx::nginx_locations:
  'Spring3HibernateApp':
    location: '/Spring3HibernateApp/'
    vhost: 'demo.training.com'
    proxy: 'http://app-dev-az-a.demo.training.com'